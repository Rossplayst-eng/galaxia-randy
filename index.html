<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Para Randy üíô</title>

<style>
  html,body{margin:0;height:100%;background:#000;overflow:hidden;font-family:system-ui,-apple-system,Segoe UI,Roboto}
  canvas{display:block;width:100vw;height:100vh}

  .top{
    position:fixed;top:16px;left:0;right:0;z-index:20;
    display:flex;justify-content:center;pointer-events:none;
    font-size:34px;font-weight:900;
    color:#ff7ad6;
    text-shadow:0 0 18px rgba(255,122,214,.55), 0 0 40px rgba(255,0,170,.25);
    padding:0 14px;text-align:center;
  }
  .sub{
    position:fixed;top:62px;left:0;right:0;z-index:20;
    display:flex;justify-content:center;pointer-events:none;
    color:rgba(255,255,255,.88);
    text-shadow:0 2px 14px rgba(0,0,0,.85);
    font-size:13px;padding:0 14px;text-align:center;
  }

  .overlay{
    position:fixed;inset:0;z-index:30;
    display:flex;flex-direction:column;justify-content:center;align-items:center;
    background:#000;color:#fff;text-align:center;padding:0 18px;
  }
  .overlay h1{
    font-size:34px;font-weight:900;letter-spacing:.2px;
    color:#ff7ad6;
    text-shadow:0 0 18px rgba(255,122,214,.6),0 0 46px rgba(255,0,170,.25);
    margin:0 0 14px 0;
  }
  .overlay p{opacity:.85;margin:0 0 26px 0}
  .enter{
    padding:14px 26px;border-radius:999px;border:none;
    background:linear-gradient(45deg,#ff3bbd,#7b4dff);
    color:white;font-size:16px;cursor:pointer;
    box-shadow:0 0 24px rgba(255,0,170,.45);
  }
  .enter:active{transform:scale(.96)}
  .small{margin-top:14px;font-size:12px;opacity:.55}
</style>
</head>

<body>
  <div class="overlay" id="overlay">
    <h1>Para Randy üíô</h1>
    <p>Te amo hasta el infinito y m√°s all√° ü™ê‚ú®</p>
    <button class="enter" onclick="startExperience()">Entrar con m√∫sica üé∂</button>
    <div class="small">iPhone/iPad requiere toque para sonido. Se abrir√° Spotify.</div>
  </div>

  <div class="top" id="titleTop">Feliz San Valent√≠n ‚ù§Ô∏è</div>
  <div class="sub" id="subTop">Te amo hasta el infinito y m√°s all√° ‚Äî Para Randy üíô‚ú®</div>

  <canvas id="c"></canvas>

<script>
/* ===== PERSONALIZA AQU√ç ===== */
const TITULO = "Feliz San Valent√≠n ‚ù§Ô∏è";
const SUB    = "Te amo hasta el infinito y m√°s all√° ‚Äî Para Randy üíô‚ú®";
const SPOTIFY_LINK = "https://open.spotify.com/track/2plbrEY59IikOBgBGLjaoe"; // Die With A Smile
const STICKER_FILE = "IMG_4079.png"; // tu archivo en el repo

const TEXTOS = [
  "Mi cielo üí´","Mi infinito ‚ôæÔ∏è","Mi mundo entero üåç","Mi ni√±o üß∏",
  "Mi chiquito hermoso ü•∫","Mi rey üëë","Mi todo ü´∂",
  "Hasta el infinito y m√°s all√° ü™ê","Mi desastre fav üòà","Te amo üíô‚ú®",
  "Mi amor eterno üíó","Eres mi coraz√≥n üíû"
];
/* ============================ */

document.getElementById("titleTop").textContent = TITULO;
document.getElementById("subTop").textContent = SUB;

const canvas = document.getElementById("c");
const ctx = canvas.getContext("2d");

let W,H,DPR;
function resize(){
  DPR = Math.max(1, Math.min(2, devicePixelRatio||1));
  W = canvas.width = Math.floor(innerWidth*DPR);
  H = canvas.height = Math.floor(innerHeight*DPR);
}
addEventListener("resize", resize); resize();

const rnd=(a,b)=>a+Math.random()*(b-a);

let started=false;
let t=0;

// Fondo: estrellitas limpias + polvo
const STARS = Array.from({length: 1100}, ()=>({
  x: Math.random(), y: Math.random(),
  r: rnd(0.6,1.8),
  a: rnd(0.08,0.55),
  tw: rnd(0,Math.PI*2)
}));
const DUST = Array.from({length: 700}, ()=>({
  x: Math.random(), y: Math.random(),
  r: rnd(0.6,1.6),
  a: rnd(0.06,0.22),
  ph: rnd(0,Math.PI*2)
}));

// Sticker image
const stickerImg = new Image();
stickerImg.src = STICKER_FILE;

// √ìrbita (stickers + textos)
const orbitStickers = [];
const orbitTexts = [];

// Stickers flotando (extra)
const floatStickers = [];

function buildOrbits(){
  orbitStickers.length = 0;
  orbitTexts.length = 0;
  floatStickers.length = 0;

  const baseR1 = Math.min(W,H)*0.20;
  const baseR2 = Math.min(W,H)*0.34;

  // Stickers orbitando alrededor del planeta
  for(let i=0;i<14;i++){
    orbitStickers.push({
      r: rnd(baseR1, baseR2),
      a: rnd(0,Math.PI*2),
      w: rnd(46,70)*DPR,
      sp: rnd(0.0022,0.0040),
      tilt: rnd(0.48,0.72)
    });
  }

  // Textos orbitando
  for(let i=0;i<TEXTOS.length;i++){
    orbitTexts.push({
      text: TEXTOS[i],
      r: rnd(baseR1*1.05, baseR2*1.2),
      a: (i/TEXTOS.length)*Math.PI*2,
      sp: rnd(0.0017,0.0031),
      tilt: rnd(0.48,0.68)
    });
  }

  // Stickers flotando suave por pantalla (para ‚Äúwow‚Äù)
  for(let i=0;i<10;i++){
    floatStickers.push({
      x: rnd(0.05,0.95),
      y: rnd(0.05,0.95),
      w: rnd(40,62)*DPR,
      vy: rnd(0.00018,0.00035),
      vx: rnd(-0.00012,0.00012),
      a: rnd(0,Math.PI*2),
      rs: rnd(-0.003,0.003)
    });
  }
}
buildOrbits();
addEventListener("resize", buildOrbits);

// Piso 3D con frases
const floorItems = [];
function buildFloor(){
  floorItems.length = 0;
  const count = 170;
  for(let i=0;i<count;i++){
    floorItems.push({
      x: rnd(-1.35,1.35),
      z: rnd(0.30,3.60),
      txt: TEXTOS[(Math.random()*TEXTOS.length)|0],
      sc: rnd(0.10,0.19)
    });
  }
}
buildFloor();
addEventListener("resize", buildFloor);

function drawBackground(){
  // limpiar suave (sin estelas raras)
  ctx.fillStyle = "rgba(0,0,0,0.40)";
  ctx.fillRect(0,0,W,H);

  // nebulosa glow
  const g = ctx.createRadialGradient(W*0.5,H*0.55,0,W*0.5,H*0.55,Math.max(W,H)*0.72);
  g.addColorStop(0,"rgba(255,60,190,0.16)");
  g.addColorStop(0.38,"rgba(130,60,255,0.09)");
  g.addColorStop(1,"rgba(0,0,0,0)");
  ctx.fillStyle = g;
  ctx.fillRect(0,0,W,H);

  // polvo
  for(const d of DUST){
    const tw = (Math.sin(t*2 + d.ph)*0.5+0.5);
    ctx.globalAlpha = d.a*(0.45+tw*0.9);
    ctx.fillStyle = "rgba(255,255,255,1)";
    ctx.fillRect(d.x*W, d.y*H, d.r*DPR, d.r*DPR);
  }
  ctx.globalAlpha = 1;

  // estrellas
  for(const s of STARS){
    const tw = (Math.sin(t*2 + s.tw)*0.5+0.5);
    ctx.globalAlpha = s.a*(0.35+tw*0.85);
    ctx.fillStyle = "white";
    ctx.fillRect(s.x*W, s.y*H, s.r*DPR, s.r*DPR);
  }
  ctx.globalAlpha = 1;
}

function drawPlanetAndRing(cx,cy){
  ctx.save();
  ctx.globalCompositeOperation = "lighter";
  ctx.shadowColor = "#ff3bbd";
  ctx.shadowBlur = 42*DPR;

  const pr = Math.min(W,H)*0.085;

  // planeta glow
  const pg = ctx.createRadialGradient(cx-pr*0.4, cy-pr*0.4, 0, cx, cy, pr*1.5);
  pg.addColorStop(0,"rgba(255,255,255,0.92)");
  pg.addColorStop(0.22,"rgba(255,140,220,0.84)");
  pg.addColorStop(0.68,"rgba(120,70,255,0.78)");
  pg.addColorStop(1,"rgba(0,0,0,0.0)");

  ctx.fillStyle = pg;
  ctx.beginPath();
  ctx.arc(cx, cy, pr*1.25, 0, Math.PI*2);
  ctx.fill();

  // anillo tipo ü™ê girando
  const ringRot = t*0.35;
  ctx.strokeStyle = "rgba(255,60,190,0.97)";
  ctx.lineWidth = 10*DPR;
  ctx.beginPath();
  ctx.ellipse(cx, cy, pr*2.65, pr*0.98, ringRot, 0, Math.PI*2);
  ctx.stroke();

  ctx.globalAlpha = 0.42;
  ctx.lineWidth = 22*DPR;
  ctx.beginPath();
  ctx.ellipse(cx, cy, pr*2.18, pr*0.78, ringRot, 0, Math.PI*2);
  ctx.stroke();

  // brillo central extra
  ctx.globalAlpha = 0.35;
  ctx.fillStyle = "rgba(255,60,190,1)";
  ctx.beginPath();
  ctx.arc(cx, cy, pr*0.55, 0, Math.PI*2);
  ctx.fill();

  ctx.restore();
  ctx.globalAlpha = 1;
}

function drawFloor3D(cx,cy){
  const yaw = t*0.22;      // giro piso lento
  const fov = 620*DPR;     // perspectiva

  for(const it of floorItems){
    const x0 = it.x, z0 = it.z;

    // rotaci√≥n alrededor del centro
    const xr = x0*Math.cos(yaw) - z0*Math.sin(yaw);
    const zr = x0*Math.sin(yaw) + z0*Math.cos(yaw);

    const depth = zr + 2.35;
    const px = cx + (xr*fov)/(depth*8.6);
    const py = cy + (1.0*fov)/(depth*10.2);

    const scale = (it.sc*fov)/(depth*6.0);
    const alpha = Math.max(0, 1.12 - depth/3.5);

    // glow en el ‚Äúpiso‚Äù
    ctx.save();
    ctx.globalCompositeOperation = "lighter";
    ctx.globalAlpha = 0.11*alpha;
    ctx.fillStyle = "#ff3bbd";
    ctx.beginPath();
    ctx.ellipse(px, py+12*DPR, 42*scale, 14*scale, 0, 0, Math.PI*2);
    ctx.fill();
    ctx.restore();

    // texto del piso
    ctx.globalAlpha = 0.86*alpha;
    ctx.fillStyle = "rgba(255,122,214,0.92)";
    ctx.shadowColor = "rgba(255,60,190,0.55)";
    ctx.shadowBlur = 10*DPR;

    ctx.font = `${Math.max(11, 18*scale)}px system-ui`;
    ctx.fillText(it.txt, px - 75*scale, py - 38*scale);
  }

  ctx.globalAlpha = 1;
  ctx.shadowBlur = 0;
}

function drawOrbits(cx,cy){
  // Stickers orbitando
  for(const o of orbitStickers){
    o.a += o.sp;
    const x = cx + Math.cos(o.a)*o.r;
    const y = cy + Math.sin(o.a)*o.r*o.tilt;

    const rot = o.a + t*0.9;
    const w = o.w;

    ctx.save();
    ctx.translate(x,y);
    ctx.rotate(rot);
    ctx.globalAlpha = 0.96;
    ctx.drawImage(stickerImg, -w/2, -w/2, w, w);
    ctx.restore();
  }

  // Textos orbitando
  ctx.save();
  ctx.fillStyle = "rgba(255,122,214,0.94)";
  ctx.shadowColor = "rgba(255,60,190,0.55)";
  ctx.shadowBlur = 16*DPR;

  for(const tt of orbitTexts){
    tt.a += tt.sp;
    const x = cx + Math.cos(tt.a)*tt.r;
    const y = cy + Math.sin(tt.a)*tt.r*tt.tilt;

    ctx.font = `${Math.max(12, 16*DPR)}px system-ui`;
    ctx.fillText(tt.text, x - 72*DPR, y);
  }
  ctx.restore();
}

function drawFloatStickers(){
  for(const s of floatStickers){
    s.y += s.vy;
    s.x += s.vx;
    s.a += s.rs;

    if(s.y > 1.12) s.y = -0.12;
    if(s.x > 1.12) s.x = -0.12;
    if(s.x < -0.12) s.x = 1.12;

    const x = s.x * W;
    const y = s.y * H;
    const w = s.w;

    ctx.save();
    ctx.translate(x,y);
    ctx.rotate(s.a);
    ctx.globalAlpha = 0.85;
    ctx.drawImage(stickerImg, -w/2, -w/2, w, w);
    ctx.restore();
  }
}

function loop(){
  t += 0.012;

  drawBackground();

  const cx = W/2;
  const cy = H/2 + 60*DPR;

  // Piso 3D debajo del planeta
  drawFloor3D(cx, cy + 140*DPR);

  // Planeta y anillo
  drawPlanetAndRing(cx, cy);

  // √ìrbita: stickers + textos
  drawOrbits(cx, cy);

  // Extra: stickers flotando suave por pantalla
  drawFloatStickers();

  requestAnimationFrame(loop);
}

function startExperience(){
  if(started) return;
  started = true;
  document.getElementById("overlay").style.display="none";

  // M√∫sica (requiere toque; abrimos Spotify)
  window.open(SPOTIFY_LINK, "_blank");

  loop();
}
</script>
</body>
</html>
