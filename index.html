<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Para Randy üíô</title>
  <style>
    html,body{margin:0;height:100%;background:#000;overflow:hidden;font-family:system-ui,-apple-system,Segoe UI,Roboto}
    canvas{display:block}

    .top{
      position:fixed;top:16px;left:0;right:0;z-index:10;
      display:flex;justify-content:center;pointer-events:none;
      font-size:30px;font-weight:800;letter-spacing:.3px;
      color:#ff7ad6;
      text-shadow:0 0 12px rgba(255,122,214,.35), 0 0 28px rgba(255,0,170,.12);
      padding:0 16px;text-align:center;
    }
    .sub{
      position:fixed;top:58px;left:0;right:0;z-index:10;
      display:flex;justify-content:center;pointer-events:none;
      color:rgba(255,255,255,.86);
      text-shadow:0 2px 14px rgba(0,0,0,.85);
      font-size:13px;padding:0 16px;text-align:center;
    }
  </style>
</head>
<body>
  <div class="top">Feliz San Valent√≠n ‚ù§Ô∏è</div>
  <div class="sub">Te amo hasta el infinito y m√°s all√° ‚Äî Para Randy üíô‚ú®</div>
  <canvas id="c"></canvas>

<script>
  // ===== Personaliza =====
  const STICKER_FILE = "IMG_4079.png";
  const COLOR_GLOW = "#ff3bbd";     // rosa suave
  const COLOR_TEXT = "#ff7ad6";
  const TEXTOS_PISO = [
    "Mi cielo üí´","Mi infinito ‚ôæÔ∏è","Mi mundo entero üåç","Mi ni√±o üß∏",
    "Mi chiquito hermoso ü•∫","Mi rey üëë","Mi todo ü´∂",
    "Hasta el infinito y m√°s all√° ü™ê","Mi desastre fav üòà","Te amo üíô‚ú®"
  ];
  // =======================

  const canvas = document.getElementById("c");
  const ctx = canvas.getContext("2d");
  let W,H,DPR;

  function resize(){
    DPR = Math.max(1, Math.min(2, devicePixelRatio||1));
    W = canvas.width = Math.floor(innerWidth*DPR);
    H = canvas.height = Math.floor(innerHeight*DPR);
    canvas.style.width = innerWidth+"px";
    canvas.style.height = innerHeight+"px";
  }
  addEventListener("resize", resize); resize();

  const rnd=(a,b)=>a+Math.random()*(b-a);

  // ‚≠ê Fondo limpio (sin rayas)
  const stars = Array.from({length: 900}, ()=>({
    x: Math.random(), y: Math.random(),
    r: rnd(0.6,1.6),
    a: rnd(0.10,0.55),
    ph: rnd(0,Math.PI*2)
  }));

  // ‚ùÑÔ∏è cuadraditos suaves
  const squares = Array.from({length: 160}, ()=>({
    x: Math.random(), y: Math.random(),
    s: rnd(0.9,2.2), a: rnd(0.06,0.16), vy: rnd(0.0005,0.0016)
  }));

  // üñºÔ∏è sticker (POQUITOS como estrellitas)
  const sticker = new Image();
  sticker.src = STICKER_FILE;
  let stickerReady=false;
  sticker.onload=()=>stickerReady=true;

  const floatStickers = Array.from({length: 8}, ()=>({
    x: rnd(0.1,0.9), y: rnd(0.1,0.95),
    w: rnd(34,52)*DPR,
    vy: rnd(0.00012,0.00022),
    vx: rnd(-0.00008,0.00008),
    a: rnd(0,Math.PI*2),
    rs: rnd(-0.0018,0.0018)
  }));

  // Piso 3D (POCO para que NO sature)
  const tile = [];
  for(let i=0;i<44;i++){
    tile.push({
      x: rnd(-1.2,1.2),
      z: rnd(0.4,3.2),
      sc: rnd(0.12,0.18),
      txt: TEXTOS_PISO[(Math.random()*TEXTOS_PISO.length)|0]
    });
  }

  let T=0;

  function draw(){
    T += 0.012;

    // Limpieza estable (sin estelas rosas)
    ctx.globalCompositeOperation = "source-over";
    ctx.fillStyle = "rgba(0,0,0,0.55)";
    ctx.fillRect(0,0,W,H);

    // Nebulosa suave
    const g = ctx.createRadialGradient(W*0.5,H*0.5,0,W*0.5,H*0.5,Math.max(W,H)*0.75);
    g.addColorStop(0,"rgba(255,60,190,0.10)");
    g.addColorStop(0.40,"rgba(130,60,255,0.06)");
    g.addColorStop(1,"rgba(0,0,0,0)");
    ctx.fillStyle = g;
    ctx.fillRect(0,0,W,H);

    // Estrellas twinkle
    for(const st of stars){
      const tw = (Math.sin(T*2 + st.ph)*0.5+0.5);
      ctx.globalAlpha = st.a*(0.35+tw*0.85);
      ctx.fillStyle = "white";
      ctx.fillRect(st.x*W, st.y*H, st.r*DPR, st.r*DPR);
    }
    ctx.globalAlpha = 1;

    // Cuadritos
    for(const q of squares){
      q.y += q.vy;
      if(q.y>1.12){ q.y=-0.12; q.x=Math.random(); }
      ctx.globalAlpha = q.a;
      ctx.fillStyle="rgba(255,255,255,1)";
      ctx.fillRect(q.x*W, q.y*H, q.s*DPR, q.s*DPR);
    }
    ctx.globalAlpha = 1;

    // Piso 3D suave
    const cx=W*0.5, cy=H*0.74;
    const yaw = T*0.18;
    const fov = 560*DPR;

    for(const it of tile){
      const x0=it.x, z0=it.z;
      const xr = x0*Math.cos(yaw) - z0*Math.sin(yaw);
      const zr = x0*Math.sin(yaw) + z0*Math.cos(yaw);

      const depth = zr + 2.25;
      const px = cx + (xr*fov)/(depth*8.8);
      const py = cy + (1.0*fov)/(depth*10.3);

      const scale = (it.sc*fov)/(depth*6.2);
      const alpha = Math.max(0, 1.0 - depth/3.4);

      // glow piso m√≠nimo
      ctx.globalAlpha = 0.05*alpha;
      ctx.fillStyle = COLOR_GLOW;
      ctx.beginPath();
      ctx.ellipse(px, py+12*DPR, 34*scale, 11*scale, 0, 0, Math.PI*2);
      ctx.fill();

      // texto piso
      ctx.globalAlpha = 0.72*alpha;
      ctx.fillStyle = "rgba(255,122,214,0.85)";
      ctx.shadowColor = "rgba(255,60,190,0.22)";
      ctx.shadowBlur = 6*DPR;
      ctx.font = `${Math.max(11, 18*scale)}px system-ui`;
      ctx.fillText(it.txt, px - 68*scale, py - 36*scale);
      ctx.shadowBlur = 0;
    }
    ctx.globalAlpha = 1;

    // ü™ê Centro simple (anillo suave) SIN QUEMAR
    const ringY = H*0.62;
    const ringR = Math.min(W,H)*0.14;

    ctx.save();
    ctx.globalCompositeOperation = "lighter";
    ctx.shadowColor = COLOR_GLOW;
    ctx.shadowBlur = 18*DPR;
    ctx.strokeStyle = "rgba(255,60,190,0.70)";
    ctx.lineWidth = 6*DPR;
    ctx.beginPath();
    ctx.ellipse(W*0.5, ringY, ringR*1.8, ringR*0.62, T*0.25, 0, Math.PI*2);
    ctx.stroke();
    ctx.restore();

    // Stickers flotando poquitos
    for(const s of floatStickers){
      s.y += s.vy; s.x += s.vx; s.a += s.rs;
      if(s.y>1.12) s.y=-0.12;
      if(s.x>1.12) s.x=-0.12;
      if(s.x<-0.12) s.x=1.12;

      const x=s.x*W, y=s.y*H, w=s.w;
      ctx.save();
      ctx.translate(x,y);
      ctx.rotate(s.a);
      ctx.globalAlpha = 0.72;
      if(stickerReady){
        ctx.drawImage(sticker, -w/2, -w/2, w, w);
      }else{
        ctx.fillStyle="rgba(255,122,214,0.75)";
        ctx.font = `${Math.max(18,24*DPR)}px system-ui`;
        ctx.fillText("üíô", -10*DPR, 10*DPR);
      }
      ctx.restore();
    }

    requestAnimationFrame(draw);
  }

  // iniciar
  ctx.fillStyle="black"; ctx.fillRect(0,0,W,H);
  draw();
</script>
</body>
</html>
